<apex:page controller="TrackPackage_controller">
    <apex:slds />
    <apex:form >
        <apex:actionRegion >
            <apex:pageBlock >
                <apex:pageBlockSection >
                    <h1 style="display: inline">Enter your Tracking Number:</h1>
                </apex:pageBlockSection>
                <apex:pageBlockSection >
                    <apex:inputText maxlength="20" value="{!trackingCode}" /><br/>
                    <apex:commandButton value="Search" action="{!search}"/>
                </apex:pageBlockSection>    
                <apex:pageBlockSection >
                    <apex:pageBlockTable value="{!trackinglist}" var="mt">
                        <apex:column value="{!mt.Arrival_Location__c}" />
                        <apex:column value="{!mt.Arrival_Time__c}" />
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:pageBlock>
        </apex:actionRegion>
    </apex:form>
</apex:page>

public class TrackPackage_controller
	{
        public string trackingCode {get;set;}
        public ID current_user {get; set;}
        public list<mailtracker__c> trackinglist {get; set;}
        
        public TrackPackage_controller()
        	{
                current_user = UserInfo.getUserId();
                list<mailtracker__c> trackinglist = new list<mailtracker__c>();
            }
        public void search()
        	{
                try
                	{
                        list<mail__c> maillist = new list<mail__c>();
                        mail__c maill = new mail__c();
                        maillist = [select id, name, inhabitant__r.User__c, (select id, Arrival_Location__c, Arrival_Time__c from mailtracker__r) from mail__c where name = :trackingCode];
                        maill = maillist[0];
                        if(maill.inhabitant__r.User__c==current_user){trackinglist = maill.mailtracker__r;}
                    }
                catch(exception e){system.debug(e.getMessage());}
            }
    }

	
<apex:page controller="createcase_controller">
    <apex:slds />
    <apex:pageBlock >
        <apex:pageBlockSection title="Create a Case">
            <apex:form >
                <apex:actionRegion >
                    <apex:pageBlock >
                        <h1 style="font-size:36px;">{!$User.FirstName}, what's the matter?</h1>
                        Subject: <apex:inputField value="{!case1.Subject}" required="true" /><br />
                        Description: <apex:inputField value="{!case1.Description}" required="true"  /><br />
                        Case Reason: <apex:inputField value="{!case1.Reason}" required="true"/><br />
                        <apex:pageBlockButtons location="bottom">
                            <apex:commandButton action="{! save }" value="Save" />
                        </apex:pageBlockButtons> 
                    </apex:pageBlock>
                </apex:actionRegion>
                <apex:actionRegion >
                    <apex:pageBlock >
                        <apex:pageBlockButtons location="bottom">
                            <apex:commandButton action="{!renderOpenCases}" value="See Open Cases" reRender="OpenCases" />
                            <apex:commandButton action="{!renderClosedCases}" value="See Closed Cases" reRender="ClosedCases"/>
                        </apex:pageBlockButtons>
                    </apex:pageBlock>
                </apex:actionRegion>
            </apex:form>
        </apex:pageBlockSection>
        <apex:pageBlockSection title="Open Cases" id="OpenCases">
            <apex:pageBlockTable value="{!newcaselist}" var="ca">
                <apex:column ><apex:outputField value="{!ca.casenumber}"/></apex:column>
                <apex:column ><apex:outputField value="{!ca.Subject}"/></apex:column>
                <apex:column ><apex:outputField value="{!ca.Description}"/></apex:column>
                <apex:column ><a href="https://postalservicecommunity-developer-edition.na174.force.com/mailhub/{!ca.id}">Edit</a></apex:column>
            </apex:pageBlockTable>
        </apex:pageBlockSection>
        <apex:pageBlockSection title="Closed Cases" id="ClosedCases">
            <apex:pageBlockTable value="{!oldcaselist}" var="ca2">
                <apex:column ><apex:outputField value="{!ca2.casenumber}"/></apex:column>
                <apex:column ><apex:outputField value="{!ca2.Subject}"/></apex:column>
                <apex:column ><apex:outputField value="{!ca2.Description}"/></apex:column>
            </apex:pageBlockTable>
        </apex:pageBlockSection>
    </apex:pageBlock>    
</apex:page>

public with sharing class createcase_controller
	{
        public Case case1 {get; set;}
        public pagereference pg {get; set;}
        public list<case> oldcaselist{get;set;}
        public list<case> newcaselist{get;set;}
        public createcase_controller()
        	{
                case1 = new Case();
                oldcaselist = new list<Case>();
                newcaselist = new list<Case>();
            }
        public void renderOpenCases()
        	{
                try{newcaselist = [select casenumber,subject,description, status from case where status != 'Closed'];}
                catch(exception e)
                	{
                        system.debug(e.getMessage());
                    }
            }
        public void renderClosedCases()
        	{
                try{oldcaselist = [select casenumber,subject,description, status from case where status = 'Closed'];}
                catch(exception e)
                	{
                        system.debug(e.getMessage());
                    }
            }
        
        public PageReference save()
        	{
                try
                	{
                        insert case1;
                        pg = new PageReference('https://postalservicecommunity-developer-edition.na174.force.com/mailhub');
                        pg.setRedirect(true);
                        return pg;
                    }
                catch(exception e)
                	{
                        system.debug(e.getMessage());
                    }
                return pg;
            }
        public void cancel()
        	{
                
            }
    }